{% extends 'bienvenido.html' %}

{% block content %}
<head>
    <meta charset="UTF-8">
    <title>Crud Peliculas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>
    <!-- la alerta para confirmar -->
    {% block js %}
        <script>
            function eliminar(id) {
                Swal.fire({
                    title: '¿Esta seguro?',
                    text: "Esta accion no se puede deshacer",
                    color: '#fff',
                    icon: 'warning',
                    iconColor: '#f11f1f',
                    showCancelButton: true,
                    confirmButtonColor: '#23730e',
                    cancelButtonColor: '#a92a2a',
                    confirmButtonText: 'Si, quiero eliminarlo',
                    background: '#262626',
                }).then((result) => {
                    if (result.isConfirmed) {
                        Swal.fire({
                            title: '¡Eliminado!',
                            text: 'la pelicula ha sido eliminada.',
                            icon: 'success',
                            color: '#fff',
                            background: '#262626',
                            showConfirmButton: false
                        })
                        setTimeout(function () {
                            window.location.href = "eliminar_pelicula/" + id
                        }, 1500)

                    }
                })
            }
        </script>
    {% endblock %}
<body class="p-3 mb-2 bg-black text-white position-relative">
<h1 class="h1"><span class="border-bottom border-3">Sistema de administración de personas (domicilios)</span></h1>
<div>
    Número de peliculas: {{ no_pelicula }}
</div>
<div>
    <a href="nueva_pelicula" class="badge badge-pill badge-dark">Agregar una nueva pelicula <i
            class="bi bi-database-fill-add"></i></a>
</div>
<div>
    <table class="table table-responsive table-bordered table-dark table align-middle">
        <thead>
        <tr>
            <th scope="col">Portada</th>
            <th scope="col">Titulo</th>
            <th scope="col">Fecha Estreno</th>
            <th scope="col">Duracion</th>
            <th scope="col" nowrap>Sinopsis</th>
            <th scope="col">Calificacion</th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for Pelicula in li_pelicula %}
            <tr>
                <td scope="row"> <img src="../media/{{ Pelicula.portada }}" alt="no encontrada" class="img-fluid"> </td>
                <td>{{ Pelicula.titulo }}</td>
                <td>{{ Pelicula.f_estreno }}</td>
                <td>{{ Pelicula.duracion }}</td>
                <td>{{ Pelicula.sinopsis }}</td>
                <td>{{ Pelicula.calificacion }}</td>
                <td><a href="detalle_pelicula/{{ Pelicula.id }}" class="badge badge-secondary"><i
                        class="bi bi-eye"></i></a></td>
                <td><a href="editar_pelicula/{{ Pelicula.id }}" class="badge badge-secondary"><i
                        class="bi bi-pencil-square"></i></a></td>
                <td><a href=#" class="badge badge-secondary" onclick="eliminar({{ Pelicula.id }})"><i
                        class="bi bi-trash"></i></a></td>
            </tr>
        {% endfor %}
        </tbody>
    </table>
</div>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</body>
</html>
{% endblock %}